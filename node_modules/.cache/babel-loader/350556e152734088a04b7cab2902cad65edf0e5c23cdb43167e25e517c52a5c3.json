{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Downloads\\\\estudos\\\\estudos\\\\Gh\\\\src\\\\components\\\\AutoComplete.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { materialsService } from '../services/materialsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AutoComplete = ({\n  value,\n  onChange,\n  placeholder,\n  onSelect,\n  disabled = false\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [suggestions, setSuggestions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const inputRef = useRef(null);\n  const containerRef = useRef(null);\n  const searchTimeoutRef = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (containerRef.current && !containerRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n  const searchMaterials = async searchTerm => {\n    if (!searchTerm || searchTerm.length < 2) {\n      setSuggestions([]);\n      setIsOpen(false);\n      return;\n    }\n    setLoading(true);\n    try {\n      const result = await materialsService.searchMaterials(searchTerm);\n      if (result.success) {\n        setSuggestions(result.data);\n        setIsOpen(result.data.length > 0);\n      } else {\n        setSuggestions([]);\n        setIsOpen(false);\n      }\n    } catch (error) {\n      console.error('Erro na busca:', error);\n      setSuggestions([]);\n      setIsOpen(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleInputChange = e => {\n    const newValue = e.target.value;\n    onChange(newValue);\n\n    // Debounce da busca\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    searchTimeoutRef.current = setTimeout(() => {\n      searchMaterials(newValue);\n    }, 300);\n  };\n  const handleSuggestionClick = suggestion => {\n    onChange(suggestion.nome);\n    setIsOpen(false);\n    if (onSelect) {\n      onSelect(suggestion);\n    }\n  };\n  const handleFocus = () => {\n    if (value && value.length >= 2) {\n      searchMaterials(value);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"autocomplete-container\",\n    ref: containerRef,\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ref: inputRef,\n      type: \"text\",\n      value: value,\n      onChange: handleInputChange,\n      onFocus: handleFocus,\n      placeholder: placeholder,\n      disabled: disabled\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        right: '10px',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        fontSize: '12px',\n        color: '#666'\n      },\n      children: \"Buscando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), isOpen && suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"autocomplete-suggestions\",\n      children: suggestions.map(suggestion => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"suggestion-item\",\n        onClick: () => handleSuggestionClick(suggestion),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: suggestion.nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#666'\n            },\n            children: [suggestion.nome_curto, \" - \", suggestion.tipo_medida]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }, this)\n      }, suggestion.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), isOpen && suggestions.length === 0 && !loading && value.length >= 2 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"autocomplete-suggestions\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"suggestion-item\",\n        style: {\n          color: '#666',\n          fontStyle: 'italic'\n        },\n        children: \"Nenhum material encontrado\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(AutoComplete, \"sGYqZ72xZDkr/YhQCXRnGtwKyXw=\");\n_c = AutoComplete;\nexport default AutoComplete;\nvar _c;\n$RefreshReg$(_c, \"AutoComplete\");","map":{"version":3,"names":["React","useState","useEffect","useRef","materialsService","jsxDEV","_jsxDEV","AutoComplete","value","onChange","placeholder","onSelect","disabled","_s","isOpen","setIsOpen","suggestions","setSuggestions","loading","setLoading","inputRef","containerRef","searchTimeoutRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","searchMaterials","searchTerm","length","result","success","data","error","console","handleInputChange","e","newValue","clearTimeout","setTimeout","handleSuggestionClick","suggestion","nome","handleFocus","className","ref","children","type","onFocus","fileName","_jsxFileName","lineNumber","columnNumber","style","position","right","top","transform","fontSize","color","map","onClick","nome_curto","tipo_medida","id","fontStyle","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Downloads/estudos/estudos/Gh/src/components/AutoComplete.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { materialsService } from '../services/materialsService';\r\n\r\nconst AutoComplete = ({ \r\n  value, \r\n  onChange, \r\n  placeholder, \r\n  onSelect,\r\n  disabled = false\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [suggestions, setSuggestions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const inputRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const searchTimeoutRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (containerRef.current && !containerRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const searchMaterials = async (searchTerm) => {\r\n    if (!searchTerm || searchTerm.length < 2) {\r\n      setSuggestions([]);\r\n      setIsOpen(false);\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const result = await materialsService.searchMaterials(searchTerm);\r\n      if (result.success) {\r\n        setSuggestions(result.data);\r\n        setIsOpen(result.data.length > 0);\r\n      } else {\r\n        setSuggestions([]);\r\n        setIsOpen(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro na busca:', error);\r\n      setSuggestions([]);\r\n      setIsOpen(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const newValue = e.target.value;\r\n    onChange(newValue);\r\n\r\n    // Debounce da busca\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n\r\n    searchTimeoutRef.current = setTimeout(() => {\r\n      searchMaterials(newValue);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSuggestionClick = (suggestion) => {\r\n    onChange(suggestion.nome);\r\n    setIsOpen(false);\r\n    if (onSelect) {\r\n      onSelect(suggestion);\r\n    }\r\n  };\r\n\r\n  const handleFocus = () => {\r\n    if (value && value.length >= 2) {\r\n      searchMaterials(value);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"autocomplete-container\" ref={containerRef}>\r\n      <input\r\n        ref={inputRef}\r\n        type=\"text\"\r\n        value={value}\r\n        onChange={handleInputChange}\r\n        onFocus={handleFocus}\r\n        placeholder={placeholder}\r\n        disabled={disabled}\r\n      />\r\n      {loading && (\r\n        <div style={{ \r\n          position: 'absolute', \r\n          right: '10px', \r\n          top: '50%', \r\n          transform: 'translateY(-50%)',\r\n          fontSize: '12px',\r\n          color: '#666'\r\n        }}>\r\n          Buscando...\r\n        </div>\r\n      )}\r\n      {isOpen && suggestions.length > 0 && (\r\n        <div className=\"autocomplete-suggestions\">\r\n          {suggestions.map((suggestion) => (\r\n            <div\r\n              key={suggestion.id}\r\n              className=\"suggestion-item\"\r\n              onClick={() => handleSuggestionClick(suggestion)}\r\n            >\r\n              <div>\r\n                <strong>{suggestion.nome}</strong>\r\n                <div style={{ fontSize: '12px', color: '#666' }}>\r\n                  {suggestion.nome_curto} - {suggestion.tipo_medida}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {isOpen && suggestions.length === 0 && !loading && value.length >= 2 && (\r\n        <div className=\"autocomplete-suggestions\">\r\n          <div className=\"suggestion-item\" style={{ color: '#666', fontStyle: 'italic' }}>\r\n            Nenhum material encontrado\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AutoComplete;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}